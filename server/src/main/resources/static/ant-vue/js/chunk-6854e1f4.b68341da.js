(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6854e1f4"],{"4b61":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-spin",{attrs:{spinning:e.spinning}},[a("page-header-wrapper",{attrs:{title:!1,content:"本工具提供了两种数据库表导入方式，连接数据库和导入SQL创建表脚本"}},[a("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[a("a-tabs",{attrs:{"default-active-key":"1",type:"card"}},[a("a-tab-pane",{key:"1",attrs:{tab:"连接数据库"}},[a("a-form",{attrs:{form:e.connectDatabaseForm,"label-col":{span:5},"wrapper-col":{span:12}},on:{submit:e.handleConnectDatabaseSubmit}},[a("a-form-item",{attrs:{label:"数据库类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbType",{initialValue:"MySQL",rules:[{required:!0,message:"请选择数据库类型！"}]}],expression:"[\n                    'dbType',\n                    {\n                      initialValue: 'MySQL',\n                      rules: [\n                        { required: true, message: '请选择数据库类型！' }\n                      ]\n                    }\n                  ]"}],attrs:{"button-style":"solid"},on:{change:e.onChangeDbType}},e._l(e.dbTypes,(function(t,r){return a("a-radio-button",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:r,attrs:{value:t.type}},[e._v(" "+e._s(t.type)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"服务器地址"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["server",{initialValue:e.dbServer,rules:[{required:!0,message:"请输入服务器地址！"}]}],expression:"[\n                    'server',\n                    {\n                      initialValue: dbServer,\n                      rules: [\n                        { required: true, message: '请输入服务器地址！' }\n                      ]\n                    }\n                  ]"}],attrs:{placeholder:"请输入服务器地址！"}})],1),a("a-form-item",{attrs:{label:"端口号"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["port",{initialValue:e.dbPort,rules:[{required:!0,message:"请输入端口号！"}]}],expression:"[\n                    'port',\n                    {\n                      initialValue: dbPort,\n                      rules: [{ required: true, message: '请输入端口号！' }]\n                    }\n                  ]"}],attrs:{placeholder:"请输入端口号！",min:1,max:65535}})],1),a("a-form-item",{attrs:{label:"数据库名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["database",{initialValue:e.dbName,rules:[{required:!0,message:"请输入数据库名！"}]}],expression:"[\n                    'database',\n                    {\n                      initialValue: dbName,\n                      rules: [{ required: true, message: '请输入数据库名！' }]\n                    }\n                  ]"}],attrs:{placeholder:"请输入需要连接的数据库名！"}})],1),a("a-form-item",{attrs:{label:"登录名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{initialValue:e.dbUser,rules:[{required:!0,message:"请输入登录名！"}]}],expression:"[\n                    'username',\n                    {\n                      initialValue: dbUser,\n                      rules: [{ required: true, message: '请输入登录名！' }]\n                    }\n                  ]"}],attrs:{placeholder:"请输入数据库登录名！"}})],1),a("a-form-item",{attrs:{label:"登录密码"}},[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{initialValue:e.dbPass,rules:[{required:!0,message:"请输入登录密码！"}]}],expression:"[\n                    'password',\n                    {\n                      initialValue: dbPass,\n                      rules: [{ required: true, message: '请输入登录密码！' }]\n                    }\n                  ]"}],attrs:{placeholder:"请输入数据库登录密码！"}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 开始连接 ")]),a("a-button",{style:{marginLeft:"8px"},on:{click:e.handleConnectDatabaseReset}},[e._v(" 重置 ")])],1)],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:"导入SQL脚本","force-render":""}},[a("a-form",{attrs:{form:e.importSqlForm,"label-col":{span:2},"wrapper-col":{span:15}},on:{submit:e.handleImportSqlSubmit}},[a("a-form-item",{attrs:{label:"数据库类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbType",{initialValue:"MySQL",rules:[{required:!0,message:"请选择数据库类型！"}]}],expression:"[\n                    'dbType',\n                    {\n                      initialValue: 'MySQL',\n                      rules: [\n                        { required: true, message: '请选择数据库类型！' }\n                      ]\n                    }\n                  ]"}],attrs:{"button-style":"solid"}},e._l(e.dbTypes,(function(t,r){return a("a-radio-button",{key:r,attrs:{value:t.type}},[e._v(" "+e._s(t.type)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"SQL脚本"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["ddl",{rules:[{required:!0,message:"请输入SQL脚本！"}]}],expression:"[\n                    'ddl',\n                    {\n                      rules: [{ required: true, message: '请输入SQL脚本！' }]\n                    }\n                  ]"}],attrs:{rows:40,placeholder:"请输入SQL CREATE脚本，可以直接多表，建议使用Navicat工具生成的DDL脚本"}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 提交 ")]),a("a-button",{style:{marginLeft:"8px"},on:{click:e.handleImportSqlReset}},[e._v(" 重置 ")])],1)],1)],1)],1)],1)],1)],1)],1)},n=[],s=a("5530"),i=(a("159b"),a("b775")),o={connectDatabase:function(e){return Object(i["c"])("/generator/connectDatabase",e)},importSql:function(e){return Object(i["c"])("/generator/importSql",e)}},l={name:"ConnectPage",data:function(){return{connectDatabaseForm:this.$form.createForm(this,{name:"connect-database-form"}),importSqlForm:this.$form.createForm(this,{name:"import-sql-form"}),spinning:!1,dbType:"MySQL",dbServer:"127.0.0.1",dbPort:3306,dbName:"mysql",dbUser:"root",dbPass:"root",dbTypes:[{type:"MySQL",port:3306,isShow:!0},{type:"SQLServer",port:1433,isShow:!0},{type:"Oracle",port:1521,isShow:!0},{type:"SQLite",port:"",isShow:!1},{type:"H2",port:"",isShow:!1}]}},components:{},mounted:function(){this.$nextTick((function(){var e=!1;e&&(this.dbServer="127.0.0.1",this.dbPort=3306,this.dbName="spider",this.dbUser="root",this.dbPass="root")}))},methods:{onChangeDbType:function(e){var t=this;this.dbTypes.forEach((function(a){a.type===e.target.value&&(t.dbPort=a.port)}))},handleConnectDatabaseSubmit:function(e){var t=this,a=this;this.spinning=!0,e.preventDefault(),this.connectDatabaseForm.validateFields((function(e,r){if(!e)try{o.connectDatabase(Object(s["a"])({},r)),t.spinning=!1,console.log("connectDatabase 1"),setTimeout((function(){a.$router.push({path:"/code/index"})}),1200),console.log("connectDatabase 2")}catch(n){t.$notification.error({message:"错误",description:"数据连接失败："+n+"，请检查配置项是否正确！",duration:3})}finally{t.spinning=!1,console.log("connectDatabase finally")}})),console.log("connectDatabase finally2"),this.spinning=!1},handleConnectDatabaseReset:function(){this.connectDatabaseForm.resetFields()},handleImportSqlSubmit:function(e){var t=this,a=this;this.spinning=!0,e.preventDefault(),this.importSqlForm.validateFields((function(e,r){if(!e)try{o.importSql(Object(s["a"])({},r)),t.spinning=!1,a.$router.push({path:"/code/index"})}catch(n){t.$notification.error({message:"错误",description:"SQL导入失败："+n,duration:3})}finally{t.spinning=!1}})),this.spinning=!1},handleImportSqlReset:function(){this.importSqlForm.resetFields()}}},c=l,u=(a("5acc"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"25f01812",null);t["default"]=d.exports},"5acc":function(e,t,a){"use strict";a("68c3")},"68c3":function(e,t,a){}}]);