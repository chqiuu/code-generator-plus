(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-528372ee"],{"329f":function(e,t,r){},"4b61":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"connection-db"},[r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"连接数据库"}},[r("div",[r("el-form",{ref:"connectDbForm",attrs:{model:e.connectInfo,rules:e.connectRules,size:"medium","label-width":"100px"}},[r("el-form-item",{attrs:{label:"数据库类型",prop:"dbType"}},[r("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择数据库类型",clearable:""},model:{value:e.connectInfo.dbType,callback:function(t){e.$set(e.connectInfo,"dbType",t)},expression:"connectInfo.dbType"}},e._l(e.dbTypeOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"服务器地址",prop:"server"}},[r("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入服务器地址",clearable:""},model:{value:e.connectInfo.server,callback:function(t){e.$set(e.connectInfo,"server",t)},expression:"connectInfo.server"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"端口号",prop:"port"}},[r("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入端口号",clearable:""},model:{value:e.connectInfo.port,callback:function(t){e.$set(e.connectInfo,"port",t)},expression:"connectInfo.port"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数据库名",prop:"database"}},[r("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入数据库名",clearable:""},model:{value:e.connectInfo.database,callback:function(t){e.$set(e.connectInfo,"database",t)},expression:"connectInfo.database"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"登录名",prop:"username"}},[r("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入登录名",clearable:""},model:{value:e.connectInfo.username,callback:function(t){e.$set(e.connectInfo,"username",t)},expression:"connectInfo.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[r("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入登录密码",clearable:"","show-password":""},model:{value:e.connectInfo.password,callback:function(t){e.$set(e.connectInfo,"password",t)},expression:"connectInfo.password"}})],1),e._v(" "),r("el-form-item",{attrs:{size:"large"}},[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitConnectDatabaseForm}},[e._v("连接数据库")]),e._v(" "),r("el-button",{on:{click:e.resetConnectDatabaseForm}},[e._v("重置")])],1)],1)],1)]),e._v(" "),r("el-tab-pane",{attrs:{label:"导入SQL脚本"}},[r("el-form",{ref:"importSqlForm",attrs:{model:e.importSql,rules:e.sqlRules,size:"medium","label-width":"100px"}},[r("el-form-item",{attrs:{label:"数据库类型",prop:"dbType"}},[r("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择数据库类型",clearable:""},model:{value:e.connectInfo.dbType,callback:function(t){e.$set(e.connectInfo,"dbType",t)},expression:"connectInfo.dbType"}},e._l(e.dbTypeOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"SQL脚本",prop:"ddl"}},[r("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入SQL CREATE脚本，可以直接多表，建议使用Navicat工具生成的DDL脚本",autosize:{minRows:20,maxRows:20}},model:{value:e.importSql.ddl,callback:function(t){e.$set(e.importSql,"ddl",t)},expression:"importSql.ddl"}})],1),e._v(" "),r("el-form-item",{attrs:{size:"large"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitImportSqlForm}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:e.resetImportSqlForm}},[e._v("重置")])],1)],1)],1)],1)],1)])},a=[],o=(r("96cf"),r("1da1")),s=r("4ec3"),l={filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},components:{},props:[],data:function(){return{loading:!1,tableList:null,columnList:null,listLoading:!0,search:"",connectInfo:{dbType:"MySQL",server:"127.0.0.1",port:3306,database:"mysql",username:"root",password:"root"},importSql:{dbType:"MySQL",ddl:null},connectRules:{dbType:[{required:!0,message:"请选择数据库类型",trigger:"change"}],server:[{required:!0,message:"请输入服务器地址",trigger:"blur"}],port:[{required:!0,message:"请输入端口号",trigger:"blur"}],database:[{required:!0,message:"请输入数据库名",trigger:"blur"}],username:[{required:!0,message:"请输入登录名",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},sqlRules:{dbType:[{required:!0,message:"请选择数据库类型",trigger:"change"}],ddl:[{required:!0,message:"请输入数据库脚本",trigger:"blur"}]},dbTypeOptions:[{label:"MySQL",value:"MySQL"},{label:"SQLite",value:"SQLite"},{label:"SQLServer",value:"SQLServer"},{label:"Oracle",value:"Oracle"},{label:"H2",value:"H2"}]}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{submitConnectDatabaseForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,s["a"].generatorConnectDatabase(this.connectInfo);case 4:t=e.sent,console.log("result",t),this.loading=!1,this.$confirm("恭喜你数据库连接成功，是否开始生成代码?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){r.$router.push("/code/index")})),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),this.$message.error("数据库连接失败",e.t0),this.loading=!1;case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}(),resetConnectDatabaseForm:function(){this.$refs["connectDbForm"].resetFields()},submitImportSqlForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,s["a"].generatorImportSql(this.importSql);case 4:this.loading=!1,this.$confirm("恭喜你SQL导入成功，是否开始生成代码?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){t.$router.push("/code/index")})),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$message.error("SQL导入失败"+e.t0),this.loading=!1;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),resetImportSqlForm:function(){this.$refs["importSqlForm"].resetFields()},fetchTableStructure:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,s["a"].generatorGetAllTableList();case 4:t=e.sent,this.tableList=t,this.listLoading=!1,this.$message.success("获取数据库表成功"),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),this.$message.error("数据库表获取失败，请先连接数据库或导入SQL脚本"+e.t0),this.loading=!1;case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}()}},c=l,i=(r("9cb9"),r("2877")),u=Object(i["a"])(c,n,a,!1,null,null,null);t["default"]=u.exports},"4ec3":function(e,t,r){"use strict";r("28a5"),r("a481");var n=r("bc3a"),a=r.n(n),o=r("4328"),s=r.n(o),l=(r("ac6a"),r("53ca"),r("56cd")),c=function(e,t){t=t||"success","warning"!==t?"error"!==t?Object(l["a"])({message:e,duration:4}):l["a"].error({message:e,duration:4}):l["a"].warn({message:e,duration:4})},i=r("a18c");r("1368").polyfill();var u=!1,d=u?"/api":"";a.a.interceptors.request.use((function(e){if("post"===e.method)for(var t in d+"/login"===e.url&&(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=s.a.stringify(e.data,{arrayFormat:"brackets"},{indices:!1})),e.data)null===e.data[t]&&delete e.data[t];return e}),(function(e){return Promise.reject(e)})),a.a.interceptors.response.use((function(e){if(1!==e.data.code&&(e.config.params&&e.config.params.noError?console.error(e.data.message):c(e.data.message,"error")),10231===e.data.code)if(u){var t=i["a"].currentRoute.path;if("/login"===t)return e;i["a"].replace({path:"/login",query:{redirect:t}})}else window.location.href=d;return e}),(function(e){return c("服务器错误","error"),Promise.reject(e)}));var p=function(e,t){var r,n=/({\w+})/g,a=e;while(null!==(r=n.exec(e))){var o=t[r[0].slice(1,-1)];if(!o)throw new Error("参数错误");a=a.replace(r[0],o),delete t[r[0].slice(1,-1)]}return{url:a,data:t}},m=function(e,t){var r=p(e,t),n=r.url,o=r.data;return new Promise((function(e,t){a.a.post(n,o).then((function(r){1===r.data.code?e(r.data.data):t(r.data.message)})).catch((function(){t("服务器错误")}))}))},f=function(e,t){var r=p(e,t),n=r.url,o=r.data;return new Promise((function(e,t){a()({method:"post",url:n,data:o,responseType:"blob"}).then((function(e){if(200===e.status){var r=e.data,n=new Blob([r]),a="";if(a=e.headers["content-disposition"].split(";").length>0?e.headers["content-disposition"].split(";")[1].split("=")[1]:"data.csv","download"in document.createElement("a")){var o=document.createElement("a");o.download=a,o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(n,a)}else t("文件下载失败")})).catch((function(){t("服务器错误")}))}))},b=function(e,t){var r=p(e,t),n=r.url,o=r.data;return new Promise((function(e,t){a.a.get(n,{params:o}).then((function(r){1===r.data.code?e(r.data.data):t(r.data.message)})).catch((function(){t("服务器错误")}))}))};a.a,t["a"]={generatorConnectDatabase:function(e){return console.log("${HEAD}"+d),m("".concat(d,"/generator/connectDatabase"),e)},generatorImportSql:function(e){return m("".concat(d,"/generator/importSql"),e)},generatorGetAllTableList:function(){return b("".concat(d,"/generator/getAllTables"),null)},generatorGeneratorCodes:function(e){return f("".concat(d,"/generator/generatorCodes"),e)},generatorGetTableList:function(e){return b("".concat(d,"/generator/queryTableList"),e)},generatorCode:function(e){return b("".concat(d,"/generator/code"),e)},generatorPreview:function(e){return b("".concat(d,"/generator/preview"),e)},generatorCodes:function(e){return b("".concat(d,"/generator/codes"),e)},generatorCodeAll:function(e){return b("".concat(d,"/generator/codeAll"),e)}}},"9cb9":function(e,t,r){"use strict";var n=r("329f"),a=r.n(n);a.a}}]);